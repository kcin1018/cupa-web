<div id="page-banner" class="<?php echo $this->pageClass(); ?>">&nbsp;</div>
<div id="page-header" class="<?php echo $this->pageClass(); ?>">
    <span class="title">
        <h2><?php echo $this->escape($this->page->title); ?></h2>
    </span>
    <?php if(!$this->page->is_visible): ?>
    <div class="visible">
        *** This page is not yet visible to the public ***
    </div>
    <?php endif; ?>
    <span class="actions">
        <?php if($this->hasRole('admin') or $this->hasRole('editor') or $this->hasRole('editor', $this->page->id)): ?>
        <a class="button" id="add-club" href="<?php echo $this->url(array(), 'page_clubs_add'); ?>">Add Team</a>
        <div id="add-club-container"></div>
        <?php endif; ?>
    </span>
</div>

<div id="page-content" class="<?php echo $this->pageClass(); ?>">
    <h3>Current Active Teams</h3>
    
    <?php foreach($this->activeClubs as $club): ?>
    <div class="club">
        <?php if($this->hasRole('admin') or $this->hasRole('editor') or $this->hasRole('editor', $this->page->id)): ?>
        <div class="links">
            <a href="<?php echo $this->url(array('club' => $club->id), 'page_clubs_edit'); ?>"><img src="<?php echo $this->baseUrl(); ?>/images/ico-edit.png"/></a>
            <a onclick="if(!confirm('Are you sure you want to delete the club <?php echo $club->name; ?>?')) { return false; } " href="<?php echo $this->url(array('club' => $club->id), 'page_clubs_delete'); ?>"><img src="<?php echo $this->baseUrl(); ?>/images/ico-delete.png"/></a>
        </div>
        <?php endif; ?>
        <div class="name"><?php echo $this->escape($club->name); ?> <span class="club-type">(<?php echo $this->escape($club->type); ?>)</span></div>
        <div class="date"><?php echo $this->escape($club->begin); ?> - Current</div>
        <div class="website"><?php echo (empty($club->website)) ? '&nbsp;' : '( <a class="website-link" href="' . $this->escape($club->website) . '">Website</a> )'; ?></div>
        <div class="captains"><strong>Captains:</strong> <?php echo (strlen($this->getClubCaptains($club->id)) > 0) ? $this->getClubCaptains($club->id) : 'Unknown'; ?></div>
        <?php if($club->email != null): ?><div class="contact"><strong>Contact Email:</strong> <?php echo $this->displayEmail($club->email); ?></div><?php endif; ?>
        <?php if($club->twitter or $club->facebook): ?>
        <div class="social"><strong>Follow <?php echo $this->escape($club->name); ?>:</strong>
            <?php if($club->twitter): ?>
                <a href="http://twitter.com/<?php echo $club->twitter; ?>"><img src="<?php echo $this->baseUrl();?>/images/twitter-icon.png"/></a>
            <?php endif; ?>
            <?php if($club->facebook): ?>
                <a href="http://facebook.com/<?php echo $club->facebook; ?>"><img src="<?php echo $this->baseUrl();?>/images/facebook-icon.png"/></a>
            <?php endif; ?>
        </div>
        <?php endif; ?>
        <div class="info"><?php echo $club->content; ?></div>
    </div>
    <?php endforeach; ?>
    
    <h3>Past Teams</h3>
    
    <?php foreach($this->pastClubs as $club): ?>
    <div class="club">
        <?php if($this->hasRole('admin') or $this->hasRole('editor') or $this->hasRole('editor', $this->page->id)): ?>
        <div class="links">
            <a href="<?php echo $this->url(array('club' => $club->id), 'page_clubs_edit'); ?>"><img src="<?php echo $this->baseUrl(); ?>/images/ico-edit.png"/></a>
            <a onclick="if(!confirm('Are you sure you want to delete the club <?php echo $club->name; ?>?')) { return false; } " href="<?php echo $this->url(array('club' => $club->id), 'page_clubs_delete'); ?>"><img src="<?php echo $this->baseUrl(); ?>/images/ico-delete.png"/></a>
        </div>
        <?php endif; ?>
        <div class="name"><?php echo $this->escape($club->name); ?> <span class="club-type">(<?php echo $this->escape($club->type); ?>)</span></div>
        <div class="date"><?php echo $this->escape($club->begin); ?> - Current</div>
        <div class="website"><?php echo (empty($club->website)) ? '&nbsp;' : '(<a href="' . $this->escape($club->website) . '">Website</a>)'; ?></div>
        <div class="captains"><strong>Captains:</strong> <?php echo (strlen($this->getClubCaptains($club->id)) > 0) ? $this->getClubCaptains($club->id) : 'Unknown'; ?></div>
        <?php if($club->email != null): ?><div class="contact"><strong>Contact Email:</strong> <?php echo $this->displayEmail($club->email); ?></div><?php endif; ?>
        <div class="info"><?php echo $club->content; ?></div>
    </div>
    <?php endforeach; ?>
</div>
  
<?php echo $this->partial('page-links.phtml', array('links' => $this->links, 'page' => $this->page)); ?>
